var THREECapsuleBufferGeometry=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}const r=e(THREE).default;function o(t,e,o,a,s,n,i,u,c){r.BufferGeometry.call(this),this.type="CapsuleBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:o,radialSegments:a,heightSegments:s,thetaStart:u,thetaLength:c},t=void 0!==t?t:1,e=void 0!==e?e:1,o=void 0!==o?o:2,a=Math.floor(a)||8,s=Math.floor(s)||1,n=Math.floor(n)||2,i=Math.floor(i)||2,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var h=Math.acos((e-t)/o),f=(a+1)*(s+1+i+n),l=a*(s+i+n)*2*3,y=new r.BufferAttribute(new(l>65535?Uint32Array:Uint16Array)(l),1),M=new r.BufferAttribute(new Float32Array(3*f),3),p=new r.BufferAttribute(new Float32Array(3*f),3),w=new r.BufferAttribute(new Float32Array(2*f),2),m=0,V=0,d=[],x=o/2;!function(){var f,l,z=new r.Vector3,v=new r.Vector3,X=Math.cos(h),b=Math.sin(h),A=new r.Vector2(t*b,x+t*X).sub(new r.Vector2(e*b,e*X-x)).length(),B=t*h+A+e*(Math.PI/2-h),Y=0;for(l=0;l<=n;l++){var g=[],E=Math.PI/2-h*(l/n);Y+=t*h/n;var G=Math.cos(E),I=Math.sin(E),P=G*t;for(f=0;f<=a;f++){var S=(C=f/a)*c+u,T=Math.sin(S),Z=Math.cos(S);v.x=P*T,v.y=x+I*t,v.z=P*Z,M.setXYZ(m,v.x,v.y,v.z),z.set(G*T,I,G*Z),p.setXYZ(m,z.x,z.y,z.z),w.setXY(m,C,1-Y/B),g.push(m),m++}d.push(g)}var F=o+X*t-X*e,R=b*(e-t)/F;for(l=1;l<=s;l++){g=[];Y+=A/s;P=b*(l*(e-t)/s+t);for(f=0;f<=a;f++){S=(C=f/a)*c+u,T=Math.sin(S),Z=Math.cos(S);v.x=P*T,v.y=x+X*t-l*F/s,v.z=P*Z,M.setXYZ(m,v.x,v.y,v.z),z.set(T,R,Z).normalize(),p.setXYZ(m,z.x,z.y,z.z),w.setXY(m,C,1-Y/B),g.push(m),m++}d.push(g)}for(l=1;l<=i;l++){g=[],E=Math.PI/2-h-(Math.PI-h)*(l/i);Y+=e*h/i;G=Math.cos(E),I=Math.sin(E),P=G*e;for(f=0;f<=a;f++){var C;S=(C=f/a)*c+u,T=Math.sin(S),Z=Math.cos(S);v.x=P*T,v.y=I*e-x,v.z=P*Z,M.setXYZ(m,v.x,v.y,v.z),z.set(G*T,I,G*Z),p.setXYZ(m,z.x,z.y,z.z),w.setXY(m,C,1-Y/B),g.push(m),m++}d.push(g)}for(f=0;f<a;f++)for(l=0;l<n+s+i;l++){var H=d[l][f],U=d[l+1][f],j=d[l+1][f+1],k=d[l][f+1];y.setX(V,H),V++,y.setX(V,U),V++,y.setX(V,k),V++,y.setX(V,U),V++,y.setX(V,j),V++,y.setX(V,k),V++}}(),this.setIndex(y),this.setAttribute("position",M),this.setAttribute("normal",p),this.setAttribute("uv",w)}o.prototype=Object.create(r.BufferGeometry.prototype),o.prototype.constructor=o,o.fromPoints=function(t,e,a,s,n,i,u,c,h,f){let l=null,y=null,M=null,p=null;y=t,l=e,p=a,M=s;const w=l,m=y,V=M,d=p,x=new r.Vector3(w.x,w.y,w.z),z=new r.Vector3(m.x,m.y,m.z),v=V,X=d;let b=x.distanceTo(z);if(b<Math.abs(V-d)){let t=new r.SphereBufferGeometry(d,n,c,h,f);return t.translate(d.x,d.y,d.z),t}const A=Math.acos((X-v)/b),B=Math.cos(A),Y=new r.Matrix4,g=new r.Quaternion,E=new r.Vector3(0,1,0),G=new r.Vector3;G.subVectors(x,z),G.normalize(),g.setFromUnitVectors(E,G),Y.makeRotationFromQuaternion(g);const I=new r.Matrix4,P=new r.Vector3;P.subVectors(x,z),P.normalize();let S=new r.Vector3;S=x,S.addScaledVector(P,B*v);let T=new r.Vector3;T=z,T.addScaledVector(P,B*X);const Z=new r.Vector3;Z.subVectors(T,S),Z.normalize();const F=new r.Vector3;F.lerpVectors(T,S,.5),I.makeTranslation(F.x,F.y,F.z);let R=new o(X,v,b,n,i,u,c,h,f);return R.applyMatrix(Y),R.applyMatrix(I),R};var a=o;return THREE.CapsuleBufferGeometry=a,a}();
