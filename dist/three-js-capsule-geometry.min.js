var THREECapsuleBufferGeometry=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=e(THREE);function a(t,e,a,o,s,n,u,f,l){r.default.BufferGeometry.call(this),this.type="CapsuleBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:a,radialSegments:o,heightSegments:s,thetaStart:f,thetaLength:l},t=void 0!==t?t:1,e=void 0!==e?e:1,a=void 0!==a?a:2,o=Math.floor(o)||8,s=Math.floor(s)||1,n=Math.floor(n)||2,u=Math.floor(u)||2,f=void 0!==f?f:0,l=void 0!==l?l:2*Math.PI;var i=Math.acos((e-t)/a),c=(o+1)*(s+1+u+n),h=o*(s+u+n)*2*3,d=new r.default.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),y=new r.default.BufferAttribute(new Float32Array(3*c),3),M=new r.default.BufferAttribute(new Float32Array(3*c),3),p=new r.default.BufferAttribute(new Float32Array(2*c),2),w=0,v=0,m=[],V=a/2;!function(){var c,h,x=new r.default.Vector3,z=new r.default.Vector3,X=Math.cos(i),b=Math.sin(i),A=new r.default.Vector2(t*b,V+t*X).sub(new r.default.Vector2(e*b,e*X-V)).length(),B=t*i+A+e*(Math.PI/2-i),Y=0;for(h=0;h<=n;h++){var g=[],E=Math.PI/2-i*(h/n);Y+=t*i/n;var G=Math.cos(E),I=Math.sin(E),P=G*t;for(c=0;c<=o;c++){var S=c/o,T=S*l+f,Z=Math.sin(T),F=Math.cos(T);z.x=P*Z,z.y=V+I*t,z.z=P*F,y.setXYZ(w,z.x,z.y,z.z),x.set(G*Z,I,G*F),M.setXYZ(w,x.x,x.y,x.z),p.setXY(w,S,1-Y/B),g.push(w),w++}m.push(g)}var R=a+X*t-X*e,C=b*(e-t)/R;for(h=1;h<=s;h++){var g=[];Y+=A/s;var P=b*(h*(e-t)/s+t);for(c=0;c<=o;c++){var S=c/o,T=S*l+f,Z=Math.sin(T),F=Math.cos(T);z.x=P*Z,z.y=V+X*t-h*R/s,z.z=P*F,y.setXYZ(w,z.x,z.y,z.z),x.set(Z,C,F).normalize(),M.setXYZ(w,x.x,x.y,x.z),p.setXY(w,S,1-Y/B),g.push(w),w++}m.push(g)}for(h=1;h<=u;h++){var g=[],E=Math.PI/2-i-(Math.PI-i)*(h/u);Y+=e*i/u;var G=Math.cos(E),I=Math.sin(E),P=G*e;for(c=0;c<=o;c++){var S=c/o,T=S*l+f,Z=Math.sin(T),F=Math.cos(T);z.x=P*Z,z.y=I*e-V,z.z=P*F,y.setXYZ(w,z.x,z.y,z.z),x.set(G*Z,I,G*F),M.setXYZ(w,x.x,x.y,x.z),p.setXY(w,S,1-Y/B),g.push(w),w++}m.push(g)}for(c=0;c<o;c++)for(h=0;h<n+s+u;h++){var H=m[h][c],U=m[h+1][c],j=m[h+1][c+1],k=m[h][c+1];d.setX(v,H),v++,d.setX(v,U),v++,d.setX(v,k),v++,d.setX(v,U),v++,d.setX(v,j),v++,d.setX(v,k),v++}}(),this.setIndex(d),this.setAttribute("position",y),this.setAttribute("normal",M),this.setAttribute("uv",p)}a.prototype=Object.create(r.default.BufferGeometry.prototype),a.prototype.constructor=a,a.fromPoints=function(t,e,o,s,n,u,f,l,i,c){let h=null,d=null,y=null,M=null;const p=h=e,w=d=t,v=y=s,m=M=o,V=new r.default.Vector3(p.x,p.y,p.z),x=new r.default.Vector3(w.x,w.y,w.z),z=v,X=m;let b=V.distanceTo(x);if(b<Math.abs(v-m)){let t=new r.default.SphereBufferGeometry(m,n,l,i,c);return t.translate(m.x,m.y,m.z),t}const A=Math.acos((X-z)/b),B=Math.cos(A),Y=new r.default.Matrix4,g=new r.default.Quaternion,E=new r.default.Vector3(0,1,0),G=new r.default.Vector3;G.subVectors(V,x),G.normalize(),g.setFromUnitVectors(E,G),Y.makeRotationFromQuaternion(g);const I=new r.default.Matrix4,P=new r.default.Vector3;P.subVectors(V,x),P.normalize();let S=new r.default.Vector3;(S=V).addScaledVector(P,B*z);let T=new r.default.Vector3;(T=x).addScaledVector(P,B*X);const Z=new r.default.Vector3;Z.subVectors(T,S),Z.normalize();const F=new r.default.Vector3;F.lerpVectors(T,S,.5),I.makeTranslation(F.x,F.y,F.z);let R=new a(X,z,b,n,u,f,l,i,c);return R.applyMatrix(Y),R.applyMatrix(I),R};var o=a;return THREE.CapsuleBufferGeometry=o,o}();
