var THREECapsuleBufferGeometry=function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}const o=r(THREE).default;function a(t,e,r,a,s,n,i,u,c){o.BufferGeometry.call(this),this.type="CapsuleBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:a,heightSegments:s,thetaStart:u,thetaLength:c},t=void 0!==t?t:1,e=void 0!==e?e:1,r=void 0!==r?r:2,a=Math.floor(a)||8,s=Math.floor(s)||1,n=Math.floor(n)||2,i=Math.floor(i)||2,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var l=Math.acos((e-t)/r),f=(a+1)*(s+1+i+n),h=a*(s+i+n)*2*3,y=new o.BufferAttribute(new(h>65535?Uint32Array:Uint16Array)(h),1),p=new o.BufferAttribute(new Float32Array(3*f),3),M=new o.BufferAttribute(new Float32Array(3*f),3),w=new o.BufferAttribute(new Float32Array(2*f),2),d=0,m=0,V=[],v=r/2;!function(){var f,h,x=new o.Vector3,b=new o.Vector3,z=Math.cos(l),X=Math.sin(l),B=new o.Vector2(t*X,v+t*z).sub(new o.Vector2(e*X,e*z-v)).length(),A=t*l+B+e*(Math.PI/2-l),E=0;for(h=0;h<=n;h++){var Y=[],G=Math.PI/2-l*(h/n);E+=t*l/n;var P=Math.cos(G),T=Math.sin(G),g=P*t;for(f=0;f<=a;f++){var I=(F=f/a)*c+u,R=Math.sin(I),S=Math.cos(I);b.x=g*R,b.y=v+T*t,b.z=g*S,p.setXYZ(d,b.x,b.y,b.z),x.set(P*R,T,P*S),M.setXYZ(d,x.x,x.y,x.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}var Z=r+z*t-z*e,C=X*(e-t)/Z;for(h=1;h<=s;h++){Y=[];E+=B/s;g=X*(h*(e-t)/s+t);for(f=0;f<=a;f++){I=(F=f/a)*c+u,R=Math.sin(I),S=Math.cos(I);b.x=g*R,b.y=v+z*t-h*Z/s,b.z=g*S,p.setXYZ(d,b.x,b.y,b.z),x.set(R,C,S).normalize(),M.setXYZ(d,x.x,x.y,x.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}for(h=1;h<=i;h++){Y=[],G=Math.PI/2-l-(Math.PI-l)*(h/i);E+=e*l/i;P=Math.cos(G),T=Math.sin(G),g=P*e;for(f=0;f<=a;f++){var F;I=(F=f/a)*c+u,R=Math.sin(I),S=Math.cos(I);b.x=g*R,b.y=T*e-v,b.z=g*S,p.setXYZ(d,b.x,b.y,b.z),x.set(P*R,T,P*S),M.setXYZ(d,x.x,x.y,x.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}for(f=0;f<a;f++)for(h=0;h<n+s+i;h++){var H=V[h][f],j=V[h+1][f],U=V[h+1][f+1],k=V[h][f+1];y.setX(m,H),m++,y.setX(m,j),m++,y.setX(m,k),m++,y.setX(m,j),m++,y.setX(m,U),m++,y.setX(m,k),m++}}(),this.setIndex(y),this.setAttribute("position",p),this.setAttribute("normal",M),this.setAttribute("uv",w)}a.prototype=Object.create(o.BufferGeometry.prototype),a.prototype.constructor=a,a.fromPoints=function(t,e,r,s,n,i,u,c,l,f){let h=null,y=null,p=null,M=null;y=t,h=e,M=r,p=s;const w=h,d=y,m=p,V=M,v=new o.Vector3(w.x,w.y,w.z),x=new o.Vector3(d.x,d.y,d.z),b=m,z=V;let X=v.distanceTo(x);if(X<Math.abs(m-V)){let t=new o.SphereBufferGeometry(V,n,c,l,f);return t.translate(V.x,V.y,V.z),t}const B=Math.acos((z-b)/X),A=Math.cos(B),E=new o.Matrix4,Y=new o.Quaternion,G=new o.Vector3(0,1,0),P=new o.Vector3;P.subVectors(v,x),P.normalize(),Y.setFromUnitVectors(G,P),E.makeRotationFromQuaternion(Y);const T=new o.Matrix4,g=new o.Vector3;g.subVectors(v,x),g.normalize();let I=new o.Vector3;I=v,I.addScaledVector(g,A*b);let R=new o.Vector3;R=x,R.addScaledVector(g,A*z);const S=new o.Vector3;S.subVectors(R,I),S.normalize();const Z=new o.Vector3;Z.lerpVectors(R,I,.5),T.makeTranslation(Z.x,Z.y,Z.z);let C=new a(z,b,X,n,i,u,c,l,f);return C.applyMatrix(E),C.applyMatrix(T),C};var s=a;return function(t,e){if(void 0!==THREE[t]){if(THREE[t]!==e){throw`CapsuleBufferGeometry: ${t} is duplicated. Your bundle includes ${t} twice. Please repair your bundle.`}}else THREE[t]=e}("CapsuleBufferGeometry",s),t.CapsuleBufferGeometry=s,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
