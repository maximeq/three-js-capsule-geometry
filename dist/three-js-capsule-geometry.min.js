var THREECapsuleBufferGeometry=function(t,e){"use strict";function r(t,r,o,a,s,n,i,u,c){e.BufferGeometry.call(this),this.type="CapsuleBufferGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:o,radialSegments:a,heightSegments:s,thetaStart:u,thetaLength:c},t=void 0!==t?t:1,r=void 0!==r?r:1,o=void 0!==o?o:2,a=Math.floor(a)||8,s=Math.floor(s)||1,n=Math.floor(n)||2,i=Math.floor(i)||2,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var l=Math.acos((r-t)/o),h=(a+1)*(s+1+i+n),f=a*(s+i+n)*2*3,y=new e.BufferAttribute(new(f>65535?Uint32Array:Uint16Array)(f),1),p=new e.BufferAttribute(new Float32Array(3*h),3),M=new e.BufferAttribute(new Float32Array(3*h),3),w=new e.BufferAttribute(new Float32Array(2*h),2),d=0,m=0,V=[],x=o/2;!function(){var h,f,v=new e.Vector3,z=new e.Vector3,b=Math.cos(l),X=Math.sin(l),B=new e.Vector2(t*X,x+t*b).sub(new e.Vector2(r*X,r*b-x)).length(),A=t*l+B+r*(Math.PI/2-l),E=0;for(f=0;f<=n;f++){var Y=[],G=Math.PI/2-l*(f/n);E+=t*l/n;var P=Math.cos(G),T=Math.sin(G),g=P*t;for(h=0;h<=a;h++){var I=(F=h/a)*c+u,R=Math.sin(I),S=Math.cos(I);z.x=g*R,z.y=x+T*t,z.z=g*S,p.setXYZ(d,z.x,z.y,z.z),v.set(P*R,T,P*S),M.setXYZ(d,v.x,v.y,v.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}var Z=o+b*t-b*r,C=X*(r-t)/Z;for(f=1;f<=s;f++){Y=[];E+=B/s;g=X*(f*(r-t)/s+t);for(h=0;h<=a;h++){I=(F=h/a)*c+u,R=Math.sin(I),S=Math.cos(I);z.x=g*R,z.y=x+b*t-f*Z/s,z.z=g*S,p.setXYZ(d,z.x,z.y,z.z),v.set(R,C,S).normalize(),M.setXYZ(d,v.x,v.y,v.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}for(f=1;f<=i;f++){Y=[],G=Math.PI/2-l-(Math.PI-l)*(f/i);E+=r*l/i;P=Math.cos(G),T=Math.sin(G),g=P*r;for(h=0;h<=a;h++){var F;I=(F=h/a)*c+u,R=Math.sin(I),S=Math.cos(I);z.x=g*R,z.y=T*r-x,z.z=g*S,p.setXYZ(d,z.x,z.y,z.z),v.set(P*R,T,P*S),M.setXYZ(d,v.x,v.y,v.z),w.setXY(d,F,1-E/A),Y.push(d),d++}V.push(Y)}for(h=0;h<a;h++)for(f=0;f<n+s+i;f++){var H=V[f][h],U=V[f+1][h],j=V[f+1][h+1],k=V[f][h+1];y.setX(m,H),m++,y.setX(m,U),m++,y.setX(m,k),m++,y.setX(m,U),m++,y.setX(m,j),m++,y.setX(m,k),m++}}(),this.setIndex(y),this.setAttribute("position",p),this.setAttribute("normal",M),this.setAttribute("uv",w)}return r.prototype=Object.create(e.BufferGeometry.prototype),r.prototype.constructor=r,r.fromPoints=function(t,o,a,s,n,i,u,c,l,h){let f=null,y=null,p=null,M=null;y=t,f=o,M=a,p=s;const w=f,d=y,m=p,V=M,x=new e.Vector3(w.x,w.y,w.z),v=new e.Vector3(d.x,d.y,d.z),z=m,b=V;let X=x.distanceTo(v);if(X<Math.abs(m-V)){let t=new e.SphereBufferGeometry(V,n,c,l,h);return t.translate(V.x,V.y,V.z),t}const B=Math.acos((b-z)/X),A=Math.cos(B),E=new e.Matrix4,Y=new e.Quaternion,G=new e.Vector3(0,1,0),P=new e.Vector3;P.subVectors(x,v),P.normalize(),Y.setFromUnitVectors(G,P),E.makeRotationFromQuaternion(Y);const T=new e.Matrix4,g=new e.Vector3;g.subVectors(x,v),g.normalize();let I=new e.Vector3;I=x,I.addScaledVector(g,A*z);let R=new e.Vector3;R=v,R.addScaledVector(g,A*b);const S=new e.Vector3;S.subVectors(R,I),S.normalize();const Z=new e.Vector3;Z.lerpVectors(R,I,.5),T.makeTranslation(Z.x,Z.y,Z.z);let C=new r(b,z,X,n,i,u,c,l,h);return C.applyMatrix(E),C.applyMatrix(T),C},function(t,e){if(void 0!==THREE[t]){if(THREE[t]!==e){throw`CapsuleBufferGeometry: ${t} is duplicated. Your bundle includes ${t} twice. Please repair your bundle.`}}else THREE[t]=e}("CapsuleBufferGeometry",r),t.CapsuleBufferGeometry=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({},THREE);
